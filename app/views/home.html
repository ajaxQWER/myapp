<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- 避免IE使用兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=yes, email=yes" />
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true">
    <!-- 微软的老式浏览器 -->
    <meta name="MobileOptimized" content="320">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制全屏 -->
    <meta name="full-screen" content="yes">
    <!-- QQ强制全屏 -->
    <meta name="x5-fullscreen" content="true">
    <!-- UC应用模式 -->
    <meta name="browsermode" content="application">
    <!-- QQ应用模式 -->
    <meta name="x5-page-mode" content="app">
    <!-- windows phone 点击无高光 -->
    <meta name="msapplication-tap-highlight" content="no">
    <!-- Color theme for statusbar -->
    <meta name="theme-color" content="#2196f3">
    <!-- Your app title -->
    <title>我的App</title>
    <!-- Path to Framework7 Library CSS, Material Theme -->
    <link rel="stylesheet" href="/stylesheets/framework7.material
.min.css">
    <!-- Path to Framework7 color related styles, Material Theme -->
    <link rel="stylesheet" href="/stylesheets/framework7.material.colors.min.css">
    <link rel="stylesheet" href="/stylesheets/framework7-icons.css">
    <!-- 富文本 -->
    <!-- <link rel="stylesheet" href="stylesheets/medit.css"> -->
    <!-- Path to your custom app styles-->
    <!-- <link rel="stylesheet" href="/stylesheets/usage.css"> -->
    <link rel="stylesheet" href="/stylesheets/my-app.css">
</head>

<body class="layout-white theme-teal">
    <!-- Status bar overlay for fullscreen mode-->
    <div class="statusbar-overlay"></div>
    <!-- Panels overlay-->
    <div class="panel-overlay"></div>
    <!-- Left panel with reveal effect-->
    <div class="panel panel-left panel-cover">
        <div class="view navbar-fixed">
            <div class="pages">
                <div class="page" data-page="panel-left">
                    <div class="navbar">
                        <div class="navbar-inner">
                            <div class="center">myApp</div>
                        </div>
                    </div>
                    <div class="page-content">
                        <div class="content-block">
                            <h2>我的App</h2>
                            <p id="login">
                                <% if (username) {%>
                                    欢迎你<%= username %><a href="#" id="sign-out">退出</a>
                                <%}else{%>
                                    <a href="/login.html" class="close-panel" id="login">登录</a>
                                <%}%>
                            </p>
                            <p><a href="#" data-popup=".popup-topic" class="close-panel open-popup">写文章</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Views-->
    <div class="views">
        <!-- Your main view, should have "view-main" class-->
        <div class="view view-main">
            <!-- Top Navbar-->
            <div class="navbar">
                <div class="navbar-inner">
                    <div class="left"><a href="#" data-panel="left" class="link icon-only open-panel"><i class="icon icon-bars"></i></a></div>
                    <div class="center">我的App</div>
                </div>
            </div>
            <!-- Pages, because we need fixed-through navbar and toolbar, it has additional appropriate classes-->
            <div class="pages navbar-fixed">
                <!-- Index Page-->
                <div data-page="index" class="page">
                    <!-- Floating Action Button -->
                    <a href="#" class="floating-button open-popup" data-popup=".popup-topic">
                        <i class="icon icon-plus"></i>
                    </a>
                    <div class="page-content pull-to-refresh-content">
                        <!-- 默认的下拉刷新层 -->
                        <div class="pull-to-refresh-layer">
                            <div class="preloader">
                                <span class="preloader-inner">
                                    <span class="preloader-inner-gap"></span>
                                <span class="preloader-inner-left">
                                        <span class="preloader-inner-half-circle"></span>
                                </span>
                                <span class="preloader-inner-right">
                                        <span class="preloader-inner-half-circle"></span>
                                </span>
                                </span>
                            </div>
                            <div class="pull-to-refresh-arrow"></div>
                        </div>
                        <div class="list-block media-list">
                            <ul>
                                <% topics.forEach(function(topic){ %>
                                    <li>
                                        <a href="/topic/<%= topic.id%>" class="item-content">
                                            <div class="item-media"><img src="#" width="50"></div>
                                            <div class="item-inner">
                                                <div class="item-title-row">
                                                    <div class="item-title"><%=topic.title%></div>
                                                    <div class="item-after"><%=topic.create_date%></div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                <% }) %>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="popup popup-topic" id="new-topic">
        <div class="content-block">
            <h2>新文章</h2>
            <p>标题</p>
            <input type="text" name="topic-title" placeholder="文章标题" maxlength="22" class="topic-title" id="topic-title">
            <p>文章内容</p>
            <div name="topic-content" class="topic-content" id="topic-content" placeholder="文章内容支持Markdown格式" contenteditable="true"></div>
            <!-- <p><a href="/usage.html" class="close-popup">*Markdown格式使用说明</a></p> -->
            <div class="buttons-row topic-btn">
                    <a href="#" class="button button-big button-fill button-raised color-red close-popup" id="cancel-topic">取消发布</a>
                    <a href="#" class="button button-big button-fill button-raised color-blue" id="submit-topic">确定发布</a>
                </div>
            </div>
            <div class="preview"></div>
        </div>
    </div>
    </div>
    <!-- Path to Framework7 Library JS-->
    <script type="text/javascript" src="/javascripts/framework7.min.js"></script>
    <!-- 富文本 -->
    <!-- <script type="text/javascript" src="javascripts/medit.js"></script> -->
    <!-- markdown -->
    <!-- <script type="text/javascript" src="/javascripts/markdown.min.js"></script> -->
    <!-- Path to your app js-->
    <script type="text/javascript" src="/javascripts/public.js"></script>
    <script type="text/javascript" src="/javascripts/index.js"></script>
</body>

</html>
